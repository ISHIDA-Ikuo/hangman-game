<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu du Pendu - Version FranÃ§aise</title>
    <style>
        :root { --primary: #002654; --accent: #ed2939; --bg: #f3f4f6; --text: #1f2937; }
        body { font-family: sans-serif; background: var(--bg); display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; color: var(--text); }
        
        .intro { text-align: center; margin-bottom: 20px; color: #4b5563; }
        .profile-card { background: white; padding: 15px; border-radius: 20px; display: flex; align-items: center; gap: 15px; margin-bottom: 20px; width: 100%; max-width: 400px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        #avatar-box { width: 50px; height: 50px; border-radius: 50%; }
        
        .game-container { background: white; padding: 25px; border-radius: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 450px; display: flex; flex-direction: column; align-items: center; }
        canvas { background: #fafafa; border-radius: 12px; border: 1px solid #e5e7eb; margin-bottom: 20px; width: 100%; max-width: 300px; }
        
        #word-display { font-size: 2.2rem; letter-spacing: 10px; margin: 15px 0; font-weight: bold; }
        #message { height: 24px; margin-bottom: 10px; font-weight: bold; }
        
        .input-group { display: flex; gap: 10px; width: 100%; }
        input[type="text"] { flex-grow: 1; padding: 12px; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 1.2rem; text-align: center; }
        button { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 12px; font-weight: bold; cursor: pointer; }
        #next-btn { background: var(--accent); margin-top: 10px; width: 100%; }
        .hidden { display: none; }

        #modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 100; }
        .modal-inner { background: white; padding: 30px; border-radius: 24px; text-align: center; }
    </style>
</head>
<body>

    <div id="modal">
        <div class="modal-inner">
            <h2>ðŸ‡«ðŸ‡· Jeu du Pendu</h2>
            <p>Entrez votre pseudonyme :</p>
            <input type="text" id="user-name" placeholder="Votre nom" style="width:100%; margin-bottom:20px; padding:10px; box-sizing: border-box;">
            <button onclick="bootGame()">Jouer</button>
        </div>
    </div>

    <div class="intro">
        <h1>ðŸ‡«ðŸ‡· Le Pendu</h1>
        <p>Devinez le mot cachÃ©. Proposez une lettre Ã  la fois.<br>
        <strong>Au bout de 6 erreurs, vous avez perdu !</strong></p>
    </div>

    <div class="profile-card">
        <img id="avatar-box" src="" alt="">
        <div><span id="name-label">Joueur</span><br><span id="score-label">Score: 0</span></div>
    </div>

    <div class="game-container">
        <canvas id="gameCanvas" width="200" height="250"></canvas>
        <div id="word-display">_ _ _ _</div>
        <div id="message"></div>
        
        <div id="input-ui" class="input-group">
            <input type="text" id="guess-input" maxlength="1" placeholder="A-Z">
            <button onclick="processGuess()">Valider</button>
        </div>
        <button id="next-btn" class="hidden" onclick="initRound()">Mot suivant</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ãƒ•ãƒ©ãƒ³ã‚¹èªžã®å˜èªžãƒªã‚¹ãƒˆï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆãªã—ã®å½¢å¼ï¼‰
        const words = ["FRANCE", "BONJOUR", "SOLEIL", "POMME", "BATEAU", "ECOLE", "MAISON", "JARDIN", "VITESSE", "AMITIÃ‰"];
        
        let targetWord, foundLetters, usedLetters, mistakes, score = 0;

        function bootGame() {
            const name = document.getElementById('user-name').value || "Visiteur";
            document.getElementById('name-label').innerText = name;
            document.getElementById('avatar-box').src = `https://api.dicebear.com/7.x/bottts/svg?seed=${name}`;
            document.getElementById('modal').style.display = 'none';
            initRound();
        }

        function initRound() {
            targetWord = words[Math.floor(Math.random() * words.length)];
            foundLetters = []; usedLetters = []; mistakes = 0;
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('input-ui').classList.remove('hidden');
            document.getElementById('message').innerText = "";
            render(); drawCanvas(0);
        }

        function render() {
            let display = "";
            for (let char of targetWord) {
                // è¡¨ç¤ºæ™‚ã¯ã‚¢ã‚¯ã‚»ãƒ³ãƒˆä»˜ãæ–‡å­—ã‚’è€ƒæ…®ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€
                // ä»Šå›žã¯ã‚·ãƒ³ãƒ—ãƒ«ã«A-Zåˆ¤å®šã«ã—ã¦ã„ã¾ã™
                display += foundLetters.includes(char) ? char : "_";
            }
            document.getElementById('word-display').innerText = display;
            
            if (!display.includes("_")) {
                document.getElementById('message').innerText = "ðŸŽ‰ FÃ©licitations !";
                document.getElementById('message').style.color = "#10b981";
                score += 10; document.getElementById('score-label').innerText = "Score: " + score;
                finish();
            } else if (mistakes >= 6) {
                document.getElementById('message').innerText = "ðŸ’€ Le mot Ã©tait : " + targetWord;
                document.getElementById('message').style.color = "#ef4444";
                finish();
            }
        }

        function drawCanvas(step) {
            ctx.clearRect(0,0,200,250); ctx.strokeStyle="#374151"; ctx.lineWidth=4;
            ctx.beginPath(); ctx.moveTo(20,230); ctx.lineTo(180,230); ctx.moveTo(50,230); ctx.lineTo(50,20); ctx.lineTo(130,20); ctx.lineTo(130,50); ctx.stroke();
            if(step>=1){ ctx.beginPath(); ctx.arc(130,70,20,0,Math.PI*2); ctx.stroke(); }
            if(step>=2){ ctx.beginPath(); ctx.moveTo(130,90); ctx.lineTo(130,160); ctx.stroke(); }
            if(step>=3){ ctx.beginPath(); ctx.moveTo(130,110); ctx.lineTo(100,140); ctx.stroke(); }
            if(step>=4){ ctx.beginPath(); ctx.moveTo(130,110); ctx.lineTo(160,140); ctx.stroke(); }
            if(step>=5){ ctx.beginPath(); ctx.moveTo(130,160); ctx.lineTo(100,200); ctx.stroke(); }
            if(step>=6){ ctx.beginPath(); ctx.moveTo(130,160); ctx.lineTo(160,200); ctx.stroke(); }
        }

        function processGuess() {
            const input = document.getElementById('guess-input');
            const char = input.value.toUpperCase(); 
            input.value = "";
            if (!char.match(/[A-Z]/) || usedLetters.includes(char)) return;
            usedLetters.push(char);
            if (targetWord.includes(char)) foundLetters.push(char); else { mistakes++; drawCanvas(mistakes); }
            render();
        }

        function finish() {
            document.getElementById('input-ui').classList.add('hidden');
            document.getElementById('next-btn').classList.remove('hidden');
        }
    </script>
</body>
</html>
